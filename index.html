<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Presence</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html, body {
  margin: 0;
  padding: 0;
  background: #05050a;
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}
canvas { display:block; }
</style>
</head>

<body>
<canvas id="c"></canvas>

<script>
// ================= CUSTOMIZE =================
const HER_NAME = "Naina";
const LINE_1   = "this was always for you";
const LINE_2   = "and I wanted you to feel it";
// =============================================

const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let w, h;
function resize() {
  w = canvas.width = innerWidth;
  h = canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

// -------- FIXED POSITIONS --------
const NAME_Y_OFFSET  = -20;
const HEART_Y_OFFSET = -40;
const TEXT_GAP       = 85;

// -------- HEART SHAPE --------
function heartPoints(cx, cy, scale, count) {
  const pts = [];
  for (let i = 0; i < count; i++) {
    const t = (i / count) * Math.PI * 2;
    const x = 16 * Math.sin(t) ** 3;
    const y =
      13 * Math.cos(t) -
      5 * Math.cos(2*t) -
      2 * Math.cos(3*t) -
      Math.cos(4*t);
    pts.push({ x: cx + x*scale, y: cy - y*scale });
  }
  return pts;
}

// -------- PARTICLES --------
class Particle {
  constructor(x,y) {
    this.x = x; this.y = y;
    this.tx = x; this.ty = y;
  }
  setTarget(p) {
    this.tx = p.x; this.ty = p.y;
  }
  update() {
    this.x += (this.tx - this.x) * 0.08;
    this.y += (this.ty - this.y) * 0.08;
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x,this.y,2,0,Math.PI*2);
    ctx.fillStyle="rgba(244,180,200,0.9)";
    ctx.fill();
  }
}

const COUNT = 220;
const particles = [];
for (let i=0;i<COUNT;i++){
  particles.push(
    new Particle(Math.random()*w, Math.random()*h)
  );
}

// -------- TIMELINE --------
const start = performance.now();

function animate(now) {
  ctx.fillStyle="rgba(5,5,10,0.25)";
  ctx.fillRect(0,0,w,h);

  const t = (now - start)/1000;

  const cx = w/2;
  const heartY = h/2 + HEART_Y_OFFSET;
  const textY  = heartY + TEXT_GAP;

  // NAME (stable)
  if (t > 1) {
    ctx.fillStyle="white";
    ctx.font="42px system-ui";
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText(HER_NAME, cx, h/2 + NAME_Y_OFFSET);
  }

  // HEART
  if (t > 3) {
    const targets = heartPoints(cx, heartY, 6, COUNT);
    particles.forEach((p,i)=>p.setTarget(targets[i]));
  }

  particles.forEach(p=>{
    if (t > 3) p.update();
    p.draw();
  });

  // ðŸ”¥ SINGLE TEXT SLOT (OVERRIDE LOGIC)
  if (t > 3.5) {
    let currentLine = LINE_1;
    if (t > 5) currentLine = LINE_2;

    ctx.font="16px system-ui";
    ctx.fillStyle="rgba(255,180,200,0.9)";
    ctx.fillText(currentLine, cx, textY);
  }

  requestAnimationFrame(animate);
}

requestAnimationFrame(animate);
</script>
</body>
</html>
